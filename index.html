<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Balloon Pop Game</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root { --ui: #222; --brand: #ff4081; }
    * { box-sizing: border-box; }
    html,body { height:100%; margin:0; }
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(180deg, #87ceeb 0%, #ffffff 100%);
      overflow: hidden;
    }
    #gameContainer {
      position: relative; width: 100vw; height: 100vh; overflow: hidden;
    }
    #hud {
      position: absolute; top: 10px; left: 10px; z-index: 5;
      background: rgba(255,255,255,.8); padding: 8px 12px; border-radius: 8px;
      font-weight: bold; color: var(--ui); font-size: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,.12);
    }
    #timer { margin-left: 10px; }
    .overlay {
      position: absolute; inset: 0; z-index: 10;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      background: rgba(0,0,0,.6); color: #fff; text-align: center; padding: 24px;
    }
    .hidden { display: none; }
    h1 { margin: 0 0 8px; font-size: 32px; }
    p  { margin: 0 0 16px; font-size: 18px; opacity: .95; }
    button {
      padding: 12px 20px; font-size: 18px; border: 0; border-radius: 10px;
      background: var(--brand); color: #fff; cursor: pointer;
      box-shadow: 0 6px 16px rgba(255,64,129,.35);
    }
    button:hover { filter: brightness(1.05); }
    .balloon {
      position: absolute; width: 64px; height: 84px;
      border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
      box-shadow: inset 0 8px 16px rgba(255,255,255,.35), 0 6px 12px rgba(0,0,0,.15);
      cursor: pointer; transform: translate3d(0,0,0);
    }
    .string {
      position: absolute; left: 50%; top: 78px; width: 2px; height: 28px;
      background: rgba(0,0,0,.25); transform: translateX(-50%);
    }
    .msg { font-size: 22px; margin-top: 6px; }
  </style>
</head>
<body>
  <div id="gameContainer">
    <div id="hud">
      <span id="score">Score: 0</span>
      <span id="timer">Time: 20s</span>
    </div>

    <!-- Start Screen -->
    <div id="startScreen" class="overlay">
      <h1>ðŸŽˆ Balloon Pop</h1>
      <p>Pop as many balloons as you can before time runs out!</p>
      <button id="startBtn">Start Game</button>
      <p class="msg">Tip: Works on mobile â€” just tap the balloons.</p>
    </div>

    <!-- End Screen -->
    <div id="endScreen" class="overlay hidden">
      <h1 id="endTitle">Game Over</h1>
      <p id="finalScore">Your Score: 0</p>
      <button id="playAgainBtn">Play Again</button>
    </div>
  </div>

  <script>
    (() => {
      const container = document.getElementById('gameContainer');
      const scoreEl   = document.getElementById('score');
      const timerEl   = document.getElementById('timer');
      const startUI   = document.getElementById('startScreen');
      const endUI     = document.getElementById('endScreen');
      const endTitle  = document.getElementById('endTitle');
      const finalScore= document.getElementById('finalScore');
      const startBtn  = document.getElementById('startBtn');
      const againBtn  = document.getElementById('playAgainBtn');

      let balloons = [];
      let score = 0;
      let playing = false;
      let spawnId = null;
      let rafId   = null;
      let timeLeft = 20; // seconds
      let timerId = null;

      const COLORS = ['#ff4d6d','#4dabf7','#38d9a9','#ffd43b','#845ef7','#ff922b','#f06595'];

      function random(min,max){ return Math.random()*(max-min)+min; }

      function makeBalloon() {
        const b = document.createElement('div');
        b.className = 'balloon';
        b.style.left = Math.floor(random(0, container.clientWidth - 64)) + 'px';
        b.style.top  = container.clientHeight + 'px'; // start just below
        b.style.background = COLORS[Math.floor(Math.random()*COLORS.length)];

        const s = document.createElement('div');
        s.className = 'string';
        b.appendChild(s);

        // speed in px/sec â€” increases as time passes (slightly harder)
        b._vy = random(80, 130) + (20 * (20 - timeLeft));
        b._y  = container.clientHeight + random(0, 40);

        b.addEventListener('pointerdown', () => {
          if(!playing) return;
          score += 1;
          scoreEl.textContent = 'Score: ' + score;
          pop(b);
        }, {passive:true});

        container.appendChild(b);
        balloons.push(b);
      }

      function pop(node){
        // simple pop effect
        node.style.transition = 'transform .12s ease, opacity .12s ease';
        node.style.transform = 'scale(1.15)';
        node.style.opacity = '0.25';
        setTimeout(() => {
          node.remove();
        }, 130);
        balloons = balloons.filter(x => x !== node);
      }

      function loop(ts){
        const dt = 1/60; // approx; ok for a light game
        for(const b of balloons){
          b._y -= b._vy * dt;
          if(b._y < -100) { // off the top
            b.remove();
          } else {
            b.style.transform = `translateY(${b._y - container.clientHeight}px)`;
          }
        }
        balloons = balloons.filter(b => b.isConnected);
        rafId = requestAnimationFrame(loop);
      }

      function startGame(){
        // reset
        balloons.forEach(b => b.remove());
        balloons = [];
        score = 0;
        timeLeft = 20;
        scoreEl.textContent = 'Score: ' + score;
        timerEl.textContent = 'Time: ' + timeLeft + 's';

        startUI.classList.add('hidden');
        endUI.classList.add('hidden');
        playing = true;

        // spawn balloons regularly
        spawnId = setInterval(makeBalloon, 700);
        rafId = requestAnimationFrame(loop);

        timerId = setInterval(() => {
          timeLeft--;
          timerEl.textContent = 'Time: ' + timeLeft + 's';
          if(timeLeft <= 0){
            endGame();
          }
        }, 1000);
      }

      function endGame(){
        playing = false;
        clearInterval(spawnId);
        clearInterval(timerId);
        cancelAnimationFrame(rafId);
        // cleanup leftovers
        balloons.forEach(b => b.remove());
        balloons = [];

        endTitle.textContent = (score >= 15) ? 'ðŸŽ‰ You Win!' : 'ðŸ˜¢ Game Over';
        finalScore.textContent = 'Your Score: ' + score;
        endUI.classList.remove('hidden');
      }

      // Bind once DOM is ready
      startBtn.addEventListener('click', startGame);
      againBtn.addEventListener('click', startGame);

      // Resize safety: keep balloons in bounds
      window.addEventListener('resize', () => {
        balloons.forEach(b => {
          const x = parseFloat(b.style.left);
          if(x > container.clientWidth - 64){
            b.style.left = Math.max(0, container.clientWidth - 64) + 'px';
          }
        });
      });
    })();
  </script>
</body>
</html>

